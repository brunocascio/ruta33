{# src/Firmas/FirmagBundle/Resources/views/Index/index.html.twig #}
{% extends 'FirmasFirmaBundle::base.html.twig' %}

{% block head %}
     {{ parent() }}
     {% block title %}<title>Estadísticas</title>{% endblock %}
{% endblock %}

{% block body %}


	{% block header %} {{ parent() }} {% endblock %}


	{% block content %} 


		{% block descripcion %}
			<div class="text-center sombra">
				<h1> Estadísticas a la fecha {{ "now"|date("d/m/Y") }}</h1>
			</div>
		{% endblock %}

			{% if Mensaje_Lista_Vacia is defined %}
					<div class="span5 offset4 text-center alert alert-info">
						<button type="button" class="close" data-dismiss="alert">&times;</button>
						No existen estadísticas aún :(
					</div>
			{% else %}

			{% if total_de_votos is defined %}
				<div class="offset4 span5">
				<h5 class="text-center alert alert-info">Total de Votos: <span class="">{{ total_de_votos }}
				</span></h5>
				</div>
			{% endif %}


				<div class="text-center">
					<table class="table table-striped table-bordered table-hover span9 offset2 container">
						<th>Ciudad</th>
						<th>Cantidad de Votos</th>
						<th>Porcentaje %</th>
						{% for clave, valor in Ciudades %}
						  	<tr>
						  		<td> {{ clave }} </td>
						  		<td> {{ valor }}  </td>
						  		<td>
						  		 {%- set resultado = valor*100/total_de_votos -%}
						  			{%- if resultado < 5 -%}
						  				<div class="progress progress-info">
								   		<div class="bar" style="width: {{ resultado }}%;">
								   		<span class="bar" style="color:#333; margin-left:2px;">{{ resultado | number_format(2,'.') }}%</span>
								    {%- elseif resultado > 5 and resultado < 10  -%}
								    	<div class="progress progress-success">
								    	<div class="bar" style="width: {{ resultado }}%;"></div>
								    	<span class="bar" style="color:#333; margin-left:2px;">{{ resultado | number_format(2,'.') }}%</span>
								    {%- elseif resultado > 10 and resultado < 20 -%}
								    	<div class="progress progress-warning">
								    	<div class="bar" style="width: {{ resultado }}%; color:#333;">{{ resultado | number_format(2,'.') }}%</div>
								    {% else %}
								    	<div class="progress progress-danger">
								    	<div class="bar" style="width: {{ resultado }}%;">{{ resultado | number_format(2,'.') }}%</div>
								    {% endif %}
								  </div>
								</td>
							</tr>
						{% endfor %}
					</table>
				</div><!-- contenedor de tabla -->
			{% endif %} 

	{% endblock %}<!--content-->

{% block footer %} {{parent()}} {% endblock %}

<!--body-->
{% endblock %}


{% block javascripts %}
	{{ parent() }}
{% endblock %}